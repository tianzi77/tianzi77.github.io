<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>进度条test</title>
    <style>
        body,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p,
        ul,
        ol,
        li,
        form,
        img,
        dl,
        dt,
        dd,
        table,
        th,
        td,
        blockquote,
        fieldset,
        strong,
        label,
        em {
            margin: 0;
            padding: 0;
            border: 0;
        }
        
        ul,
        ol,
        li {
            list-style: none;
        }
        
        .barline {
            float: left;
            width: 200px;
            background: #FFF;
            border: 2px solid #4DBF7D;
            height: 12px;
            display: inline-block;
            border-radius: 8px;
            display: none;
            position: absolute;
            left: 100px;
            top: 100px;
        }
        
        .barline #percent {
            position: absolute;
            left: 0px;
            top: -30px;
            display: inline-block;
            color: #4DBF7D;
            font-size: 16px;
        }
        
        .barline #line {
            float: left;
            height: 12px;
            overflow: hidden;
            background: #4DBF7D;
            border-radius: 8px;
        }
        
        .barline #msg {
            position: absolute;
            left: 80px;
            top: 30px;
            display: inline-block;
            color: #4DBF7D;
            font-size: 14px;
        }
    </style>
</head>
<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>

<body>
    <button type="button" onClick="processerbar(5000)">上传</button>
    <!-- 父级元素 -->
    <div style="margin:10px;padding:10px;width:500px;height:500px;background:#EEE;">

        <!-- 进度条 -->
        <div class="barline" id="probar">
            <div id="percent"></div>
            <div id="line" w="100" style="width:0px;"></div>
            <div id="msg" style=""></div>
        </div>

    </div>
    <script language="javascript">
        function processerbar(time) {
            /*进度条效果 code by zww*/
            document.getElementById('probar').style.display = "block";
            $("#line").each(function(i, item) {
                var a = parseInt($(item).attr("w"));
                $(item).animate({
                    width: a + "%"
                }, time);
            });
            var si = window.setInterval(
                function() {
                    a = $("#line").width();
                    b = (a / 200 * 100).toFixed(0);
                    /*百分比效果 code by zww*/
                    document.getElementById('percent').innerHTML = b + "%";
                    document.getElementById('percent').style.left = a - 12 + "px";
                    document.getElementById('msg').innerHTML = "上传中";
                    if (document.getElementById('percent').innerHTML == "100%") {
                        clearInterval(si);
                        document.getElementById('msg').innerHTML = "&nbsp;&nbsp;成功";
                    }
                }, 70);
        };
    </script>

</body>

</html>