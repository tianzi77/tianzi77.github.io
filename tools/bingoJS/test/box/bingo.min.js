!function(t){"use strict";var n="",e=Object.prototype.toString,i=Object.prototype.hasOwnProperty,r=function(){},o=Array.prototype.slice,s=null,u=function(){return s||(s=document.createElement("div"))},c=0,a=0,l={},h=window.bingo={version:{major:2,minor:0,rev:"alpha",build:0,toString:function(){return[this.major,this.minor,this.rev,this.build].join(".")}},_no_observe:!0,isDebug:!1,prdtVersion:"",supportWorkspace:!1,stringEmpty:n,noop:r,config:function(t){return 0==arguments.length?l:(this.extend(l,t),void this.bgTrigger("config",[l]))},hasOwnProp:function(t,n){return i.call(t,n)},trace:function(t){console.error&&console.error(t.stack||t.message||t+"")},isType:function(t,n){return e.apply(n)==="[object "+t+"]"},isUndefined:function(n){return"undefined"==typeof n||n===t},isNull:function(t){return null===t||this.isUndefined(t)},isBoolean:function(t){return this.isType("Boolean",t)},isNullEmpty:function(t){return this.isNull(t)||t===n},isFunction:function(t){return this.isType("Function",t)},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isString:function(t){return this.isType("String",t)},isObject:function(t){return!this.isNull(t)&&this.isType("Object",t)&&!this.isElement(t)&&!this.isWindow(t)},isPlainObject:function(n){if(!this.isObject(n))return!1;try{if(n.constructor&&!i.call(n,"constructor")&&!i.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var r;for(r in n);return r===t||i.call(n,r)},isArray:function(t){return Array.isArray?Array.isArray(t):this.isType("Array",t)},isWindow:function(t){return!(!t||t!=t.window)},isElement:function(t){var n=t&&(t.ownerDocument||t).documentElement;return!!n},trim:function(t){return this.isString(t)?t.replace(/(^\s*)|(\s*$)|(^\u3000*)|(\u3000*$)|(^\ue4c6*)|(\ue4c6*$)/g,""):this.isNull(t)?"":t.toString()},replaceAll:function(t,n,e,i){return this.isNullEmpty(t)||this.isNullEmpty(n)?t:(n=n.replace(/([^A-Za-z0-9])/g,"\\$1"),t=t.replace(new RegExp(n,i||"g"),e))},toStr:function(t){return this.isNull(t)?"":t.toString()},sliceArray:function(t,n,e){if(!t)return[];var i=o.call(arguments,1);return o.apply(t,i)},inArray:function(t,n){var e=-1;return this.isFunction(t)?n.some(function(n,i){return t.apply(n,arguments)===!0?(e=i,!0):void 0}):e=n.indexOf(t),e},removeArrayItem:function(t,n){return n.filter(function(n){return n!=t})},makeAutoId:function(){var t=(new Date).valueOf();return a=t==c?a+1:0,c=t,[t,a].join("_")},each:function(t,n,e){t&&n&&(h.isArray(t)||(t=this.sliceArray(t)),t.some(function(t){return n.apply(e||t,arguments)===!1}))},eachProp:function(t,n,e){if(t&&n){var i;this.each(Object.keys(t),function(t){return i=this[t],n.call(e||i,i,t,this)},t)}},htmlEncode:function(t){if(this.isNullEmpty(t))return"";var n=u();return n.textContent=t,n.innerHTML},htmlDecode:function(t){if(this.isNullEmpty(t))return"";var n=u();return n.innerHTML=t,n.textContent},extend:function(t){var n=arguments.length;if(1==n)return this.eachProp(t,function(t,n){this[n]=t},this),this;var e=this.sliceArray(arguments,1);return h.each(e,function(n){n&&this.eachProp(n,function(n,e){t[e]=n})},this),t},Class:function(t){var n=function(){var t=this._bgpro_;t&&(this._bgpro_=h.extend({},t)),this._bgpri_=new r,i&&i.apply(this,arguments)},e=n.prototype,i=null,r=function(){},o=r.prototype,s={Prop:function(t){e._bgpro_=h.extend(e._bgpro_||{},t),h.eachProp(t,function(t,n){e[n]=function(t){return 0==arguments.length?this._bgpro_[n]:(this._bgpro_[n]=t,this)}},this)},Event:function(t){e.bgEventDef(t)},Define:function(t){h.extend(e,t)},Private:function(t){h.extend(o,t)},Init:function(t){i=t}};return t.call(s),h.extend(e,{Extend:function(t){h.extend(this,t)},Private:function(t){h.extend(this._bgpri_,t)}}),n.constructor=n,n},proxy:function(t,n){return function(){return n&&n.apply(t,arguments)}},_splitEvName:function(t){return h.isString(t)?h.isNullEmpty(t)?null:h.trim(t).split(/\s+/g).map(function(t){return h.trim(t)}):t}},f=function(t,n){return{configurable:!1,enumerable:!1,value:t,writable:n!==!1}};Object.defineProperties(Object.prototype,{bgDefProp:f(function(t,n,e){return Object.defineProperty(this,t,f(n,e)),this}),bgDefProps:f(function(t){var n={};return h.eachProp(t,function(t,e){n[e]=f(t)},this),Object.defineProperties(this,n),this})});var p=["bingoV"+h.version.major].join(""),d=[p,h.version.minor].join("_");window[p]=window[d]=h}(),function(t,n){"use strict";var e="fulfilled",i="rejected",r="pending",o=function(t){return new o.fn._init(t)};o.fn=o.prototype={constructor:o,_init:function(t,n){this.state=r,this._thenH=[];try{t(function(t){this._doNext(t,e)}.bind(this),function(t){this._doNext(t,i)}.bind(this))}catch(o){this._doNext(o,i)}return this},then:function(t,n){return this._thenH&&(this._thenH.push([t,n]),this.state!=r&&this._doNext(this._result,this.state)),this},_end:function(){this._thenH=null},_doNext:function(o,s){return o&&t.isFunction(o.then)?(this.state=r,this._result=n,void o.then(function(t){this._doNext(t,e)}.bind(this),function(t){this._doNext(t,i)}.bind(this))):(this.state=s,this._result=o,void(0!=this._thenH.length&&this._doThenNext(o,s)))},_doThenNext:function(n,r){var o=this._thenH.shift()[r==e?0:1];switch(r){case e:try{n=t.isFunction(o)?o(n):n}catch(s){n=s}n instanceof Error?this._doNext(n,i):this._doNext(n,e);break;case i:t.isFunction(o)?(this._end(),o(n)):this._doNext(n,i)}},"catch":function(t){return this.then(null,t)},"finally":function(t){return this.then(t,t)}},o.fn._init.prototype=o.fn,t.extend(o,{resolve:function(t){return o(function(n){n(t)})},reject:function(t){return o(function(n,e){e(t)})},all:function(n,e){var i=1==arguments.length?n:s(n,e);return o(function(n,e){var r=[],o=i.length;i.length>0?t.each(i,function(t,i){t&&t.then?t.then(function(t){r[i]=t,--o||n(r)},e):(r[i]=t,--o||n(r))}):n(r)})},race:function(n,e){var i=1==arguments.length?n:s(n,e);return o(function(n,e){i.length>0?t.each(i,function(t,i){t&&t.then?t.then(n,e):n(t)}):n()})}});var s=function(n,e){var i=[];return t.each(n,function(t,n){i.push(e(t,n))}),i};o.when=o.all,t.Promise=o}(bingo),function(t,n){"use strict";var e="_bg_evs_",i=t.noop,r={trigger:i,end:i,off:i},o=function(t,n,i){var o=t[e]||(t[e]={});return i===!0?o[n]||(o[n]=s()):o[n]||r},s=function(){return{isEnd:!1,list:[],on:function(t,n,e){t&&(this.isEnd?t&&t.call(n):this.list.push({one:e===!0,callback:t}))},off:function(t){t?this.list=this.list.filter(function(n){return n.callback!=t}):this.list=[]},end:function(t){try{this.trigger(n,t),this.off()}finally{this.isEnd=!0}},trigger:function(n,e,i){var r,o=this.list,s=!1;return t.each(o,function(t){return t.one===!0&&(s=!0),(r=t.callback.apply(e,n||[]))===!1?!1:i===!0?!1:void 0}),s&&(this.list=o.filter(function(t){return!t.one})),r}}},u=t._splitEvName,c=function(t){var n=t[e];n&&(t.bgOff(Object.keys(n).join(" ")),t[e]=null)};Object.prototype.bgDefProps({bgOn:function(n,e){return t.each(u(n),function(t){o(this,t,!0).on(e,this)},this),this},bgOne:function(n,e){return t.each(u(n),function(t){o(this,t,!0).on(e,this,!0)},this),this},bgOff:function(n,e){return 0==arguments.length?c(this):t.each(u(n),function(t){o(this,t).off(e)},this),this},bgEnd:function(n){return t.each(u(n),function(t){o(this,t,!0).end(this)},this),this},bgTrigger:function(n,e,i){var r;return t.each(u(n),function(t){r=o(this,t).trigger(e,i||this)},this),r},bgTriggerHandler:function(n,e,i){var r;return t.each(u(n),function(t){r=o(this,t).trigger(e,i||this,!0)},this),r},bgEventDef:function(n){return t.each(u(n),function(t){this[t]=function(n){return this.bgOn(t,n)}},this),this},bgDispose:function(n){if(this.bgIsDispose)return void(n&&n.bgDispose());if(1==arguments.length)return void(n&&n.bgIsDispose||(this._bg_dispose||(this._bg_dispose=[])).push(n));this.bgIsDispose=!0;try{this.bgDispose=t.noop,this.bgDisposeStatus=1,this.bgTrigger("_bg_disp_"),t.each(this._bg_dispose,function(t){t.bgDispose()})}finally{this._bg_clsobd(),t.eachProp(this,function(t,n){t&&t.bgAutoDispose===!0&&t.bgDispose(),"bgIsDispose"!=n&&(this[n]=null)},this),this.bgDisposeStatus=2}},bgOnDispose:function(t){return this.bgOn("_bg_disp_",t)},bgIsDispose:!1,bgDisposeStatus:0,bgAutoDispose:!1,bgSync:function(t,n){var e=this._bgSync_||(this._bgSync_={_count:0,_end:function(){0!=this._count&&(this._count--,0==this._count&&(i._bgSync_=null,this.bgTrigger("done",[],i)))}}.bgEventDef("done")),i=this;return this.bgSyncAdd(1),n&&e.done(n),t&&t.call(this),e},bgSyncAdd:function(n){(this._bgSync_||this.bgSync())._count++,!!n&&setTimeout(t.proxy(this,function(){this.bgSyncDec()}),n)},bgSyncDec:function(){this._bgSync_&&this._bgSync_._end()}})}(bingo),function(t,n){"use strict";var e=(t._splitEvName,"_bg_obdata_"),i=function(n){return t.isArray(n)||t.isObject(n)},r=function(n,r,s){e in n||!function(){var i,r=[];n.bgDefProp(e,{deep:s,obs:{},sobs:[],sendObj:function(e){i&&clearTimeout(i),r.push(e);var o=this.sobs;o.length>0&&(i=setTimeout(function(){try{t.each(o,function(t){t.fn&&t.fn.call(this,r)},n)}finally{i=0,r=[]}},1))}},!1)}();var c=n[e];return s=s!==!1||c.deep,t.each(r,function(t,e){if(0!=t.indexOf("_")){var r=n[t];if(!o(n,t)){c.obs[t]=[];var a=function(){return b&&b.push({name:t,object:this,value:r,isChild:(b[b.length-1]||{}).value==this,type:"get"}),r},l=function(n){if(b&&b.push({name:t,object:this,value:r,isChild:(b[b.length-1]||{}).value==this,type:"set"}),r!=n){var e=r;r=n,s&&i(r)&&r.bgToObserve(null,s),u(this,t,{name:t,object:this,value:r,oldValue:e,type:"update"})}};Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:a,set:l}),s&&i(r)&&r.bgToObserve(null,s)}}}),n[e]},o=function(t,n){return!!s(t,n)},s=function(n,i){var r=n[e];return r&&(t.isNull(i)?r.sobs:r.obs[i])},u=function(n,i,r){var o=s(n,i);t.each(o,function(t){t.fn&&t.fn.call(this,[r])},n);var u=n[e];u&&u.sendObj(r)},c=function(n,e,i){o(n,e)||r(n,t.isNull(e)?null:[e]);var u=s(n,e);return u&&u.push({fn:i}),u},a=function(n,i,r){var o;(o=n[e])&&(t.isNull(i)?r?o.sobs=o.sobs.filter(function(t){return t.fn!=r}):o.sobs=[]:o.obs[i]&&(r?o.obs[i]=o.obs[i].filter(function(t){return t.fn!=r}):o.obs[i]=[]))},l=function(t){var n=t[e];n&&(n.obs=[]),t.bgToObserve()};Object.prototype.bgDefProps({_bg_clsobd:function(){var t=this[e];t&&(t.deep=!1,t.obs={},t.sobs=[])},bgToObserve:function(n,e){return this._no_observe===!0?this:(t.isBoolean(n)&&(e=n,n=null),r(this,n?[n]:Object.keys(this),e),this)},bgObServe:function(n,e){return this._no_observe===!0?this:(t.isNull(n)||t.isFunction(n)?(this.bgToObserve(),c(this,null,n||e)):t.each(n?[n]:Object.keys(this),function(t){c(this,t,e)},this),this)},bgUnObServe:function(n,e){return this._no_observe===!0?this:(t.isNull(n)||t.isFunction(n)?a(this,null,n||e):t.each(n?[n]:Object.keys(this),function(t){a(this,t,e)},this),this)},bgPublish:function(t){var n=t?this[t]:this;u(this,t,{name:t,object:this,value:n,oldValue:n,type:"publish"})},bgDataValue:function(t,n){var e=_(this,t,!1);return arguments.length>1&&(e[0][e[1]]=n),e[0][e[1]]},bgTestProps:function(t){return _(this,t,!0)[2]}});var h=["reverse","splice","push","pop","copyWithin","fill","shift","unshift","sort"],f={};t.each(h,function(t){var n=Array.prototype[t];f[t]=function(){if(o(this)){var e=this.slice(),i=n.apply(this,arguments),r=e.length==this.length&&this.every(function(t,n){return t===e[n]});return r||(l(this),u(this,t,{name:t,object:this,value:this,oldValue:e,type:"update"})),i}return n.apply(this,arguments)}}),f.size=function(t){if(0==arguments.length)return this.length;var n=this.length;this.length!=t&&(n=this.slice(),this.length=t,this.bgToObserve(),u(this,"",{name:"",object:this,value:this,oldValue:n,type:"update"}))},Array.prototype.bgDefProps(f);var p=function(n,e){if(n===e)return!0;if(!t.isArray(e)||n.length!=e.length)return!1;for(var i=0,r=n.length;r>i;i++)if(n[i]!=e[i])return!1;return!0},d=function(n,e){if(n===e)return!0;if(!t.isObject(e))return!1;var i=0,r=!0;return t.eachProp(n,function(t,n){return i++,e[n]!==t?(r=!1,!1):void 0}),r&&t.eachProp(e,function(){i--}),r&&0===i};t.extend({observe:function(n,e,i){if(t.isFunction(n)){var r=n;i=e;var o,s,u,c=[],a=function(n,e){var o;try{if(o=r(),n||(t.isArray(u)?!p(u,o):t.isObject(u)?!d(u,o):u!=o)){var a=1==c.length?c[0]:null,l=a&&1==a.length?a[0]:null;return(e?i.orgFn||i:i).call(y,{name:l?l.name:"",value:o,oldValue:u,object:l?l.object:a||c,type:"bingo.observe"})}}finally{u=t.isArray(o)?t.sliceArray(o):t.isObject(o)?t.extend({},o):o,y.value=o,c=[],s=null}},l=function(t){t&&c.push(t),s||(s=setTimeout(a,1))},h=function(t){y.refresh(),l(t)},f=function(n){o=g(r),y.isSucc=v&&!m,y.isSucc&&(t.each(o.w,function(t){t.object.bgObServe(t.name,l)}),y.isObs=o.w.length>0,t.each(o.p,function(t){"toObsObj"in t&&t.value&&t.value.bgObServe(h),t.object.bgObServe(t.name,h)})),n!==!0?y.value=u=o.val:y.check()},b=function(){t.each(o.w,function(t){t.object.bgUnObServe(t.name,l)}),t.each(o.p,function(t){"toObsObj"in t&&t.value&&t.value.bgUnObServe(h),t.object.bgUnObServe(t.name,h)}),o=null},y={check:function(){l(null)},publish:function(t){return a(!0,t)},unObserve:function(){b(),this.bgDispose()},refresh:function(){b(),f(!0)}};return f(),y}if(n){var w=_(n,e,!1),n=w[0],$=w[1],x=function(){return n[$]};return t.observe(x,i)}},isObserve:function(t,n){return o(t,n)}}),t.observe.error=function(){m=!0};var v,m,b=null,g=function(t){try{b=[],v=!1,m=!1;var n=t(),e=y();return v=!0,e.val=n,e}finally{b=null}},y=function(){var n=[];t.each(b,function(t,e,i){var r=e+1,o=i.length==r;if(o)n.push(t);else{var s=i[r];s.isChild||n.push(t)}});var e=[];t.each(n,function(t){var n=e.some(function(n){return t.name==n.name&&t.object==n.object});n||e.push(t)});var i=[];return t.each(b,function(n){var r=n.value,o=!0;if((t.isNull(r)||t.isArray(r))&&(n.toObsObj=!0,o=!1),o=o&&e.some(function(t){return n.name==t.name&&n.object==t.object}),!o){var s=i.some(function(t){return n.name==t.name&&n.object==t.object});s||i.push(n)}}),{w:e,p:i}},_=function(n,e,i){if(!t.isString(e))return[n,e];var r="=bingo_dot=";e=e.replace(/\[(["']?)(.*?)\1\][.]?/g,function(t,n,e){return[".",e.replace(".",r),"."].join("")}).replace(/\.$/,"");var o=e.split("."),s=/[^0-9]/,u=o.length-2,c=n,a=e,l=!0;return u>=0&&t.each(o,function(t,n){return t=t.replace(r,"."),i&&!w(c,t)?(l=!1,!1):void(u>=n?c=c[t]?c[t]:c[t]=s.test(o[n+1])?{}:[]:(a=t,a in c||(c[a]=null)))}),[c,a,-1==u?w(c,a):l]},w=function(n,e){return t.isArray(n)||t.isObject(n)||t.isWindow(n)||t.isElement(n)||t.isFunction(n)?e in n:!1}}(bingo),function(t){"use strict";var n=function(t){return{name:t,_no_observe:!0,controller:r,_controller:{},service:o,_service:{},component:s,_component:{},command:u,_command:{}}},e=function(){return t.app(this.app)},i=function(n,i,r,o,s){var u=n[i];if(3==arguments.length)return u[r]||(n!=a?a[i][r]:null);if(t.isObject(o)&&s!==!1){var c=o;o=function(){return c}}t.isObject(o)||(o=p(o)),u[r]={name:r,fn:o,app:n.name,getApp:e,_no_observe:!0}},r=function(n,e){var r=[this,"_controller"].concat(t.sliceArray(arguments));return i.apply(this,r)},o=function(n,e){var r=[this,"_service"].concat(t.sliceArray(arguments));return i.apply(this,r)},s=function(n,e){var r=[this,"_component"].concat(t.sliceArray(arguments));return i.apply(this,r)},u=function(n,e){var r=[this,"_command"].concat(t.sliceArray(arguments)),o=r[3];if(o){var s={priority:50,tmpl:"",tmplUrl:"",replace:!1,include:!1,view:!1,compileChild:!0};o=o(),t.isFunction(o)||t.isArray(o)?s.link=p(o):s=t.extend(s,o),r[3]=s,r[4]=!1}return i.apply(this,r)},c={},a=n("defualtApp"),l=null;t.extend({app:function(t,e){var i=t?c[t]||(c[t]=n(t)):a;if(!e)return i;l=i;try{return e&&e.call(i,i),i}finally{l=null}},controller:function(n,e){if(t.isFunction(n)||t.isArray(n))return n;var i=l||a;return i.controller.apply(i,arguments)},component:function(n,e){if(t.isFunction(n)||t.isObject(n))return n;var i=l||a;return i.component.apply(i,arguments)},command:function(t,n){var e=l||a;return e.command.apply(e,arguments)},service:function(t,n){var e=l||a;return e.service.apply(e,arguments)}});var h=function(){};h.$injects=[];var f=/^\s*function[^(]*?\(([^)]+?)\)/i,p=function(n){if(n&&(n.$injects||n.$fn))return n.$fn||n;var e=h;if(t.isArray(n)){var i=t.sliceArray(n);e=n.$fn=i.pop(),e.$injects=i,e.$owner=n.$owner}else if(t.isFunction(n)){e=n;var r=e.toString(),i=[];r.replace(f,function(n,e){e&&t.each(e.split(","),function(n){n=t.trim(n),n&&i.push(n)})}),e.$injects=i}return e},d=function(n,e,i,r){if(!n)throw new Error("not find inject: "+e);var o=n.$injects,s=[];if(o&&o.length>0){var u=null;t.each(o,function(t){u=t in i?i[t]:i[t]=v(t,i,r),s.push(u)})}var c=n.apply(r||window,s);return t.isString(e)&&(i[e]=c),c},v=function(n,e,i){var r=null,o="";if(t.isFunction(n)||t.isArray(n))r=p(n);else{o=n;var s=e.$view.$getApp().service(o);r=s?s.fn:null}return d(r,o,e,i)};t.inject=function(n,e,i,r){return e||(e=t.rootView()),i=t.extend({$view:e,node:e.$getNode()[0],$viewnode:e.$getViewnode(),$attr:null,$withData:null},i),v(n,i,r||e)}}(bingo),function(t){"use strict";var n,e="DOMNodeRemoved";document.documentElement.addEventListener(e,function(r){var o=r.target;setTimeout(function(){var s=o?o.parentNode:null;s||(o.bgTrigger(e,[r]),n||(n=setTimeout(function(){n=null,i.bgTrigger("onLinkNodeAll")},0)),o.hasChildNodes()&&t.each(o.querySelectorAll("*"),function(){this.bgTrigger(e,[r])}))},0)},!1),t.linkNode=function(t,n){if(n){if(!t)return void n();t.bgOne(e,n)}},t.unLinkNode=function(t,n){t&&(n?t.bgOff(e,n):t.bgOff())},Object.prototype.bgDefProps({bgLinkNode:function(n){var e=t.proxy(this,function(){this.bgDispose()});return t.linkNode(n,e),(this._linkNodeFn||(this._linkNodeFn=[])).push(e),this.bgOnDispose(function(){this.bgUnLinkNode(n)}),this},bgUnLinkNode:function(n){var e=this._linkNodeFn;return e&&e.length>0&&e.forEach(function(n){t.unLinkNode(this,n)},n),this._linkNodeFn=[],this},bgLinkNodeAll:function(t){if(t){var n=this,e=function(){t.apply(n,arguments),n.bgIsDispose&&i.bgUnLinkNodeAll(e)};t._bglfall_=e,i.bgOn("onLinkNodeAll",e)}},bgUnLinkNodeAll:function(t){t&&i.bgOff("onLinkNodeAll",t._bglfall_)}});var i={}}(bingo),function(t){"use strict";var n,e=t.Promise,i=document,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=r.getElementsByTagName("base")[0],s=/loaded|complete|undefined/i,u=function(n,e,s){var u=i.createElement("script");u.type="text/javascript",u.charset=s||"utf-8",u.async=!0,u.defer=!1,u.src=n,c(u,e||t.noop),o?r.insertBefore(u,o):r.appendChild(u)},c=function(n,e){var i=function(){if(n&&s.test(n.readyState)){n.onload=n.onerror=n.onreadystatechange=null,!t.isDebug&&n.parentNode&&n.parentNode.removeChild(n);try{e&&e(n.src)}finally{n=void 0,e=null}}};n.onload=n.onerror=n.onreadystatechange=function(){i()}},a=[],l=[],h=[],f=function(t,n){h.push({fn:t,lv:n}),h.sort(function(t,n){return t.lv-n.lv}),!d()&&y()},p=function(t){return a.some(function(n){return n==t})},d=function(){return l.length>0},v=function(n){var e=t.inArray(function(t){return this.file==n},l);return e>=0?l[e]:null},m=function(t,e){if(p(t))e&&e(t);else{var i=v(t);i?i.fns.push(e):(l.push({file:t,fns:[e],status:0}),n||(n=setTimeout(b,0)))}},b=function(){n=null,t.each(l,function(n){if(!(n.status>0)){var e=n.file;n.status=1,t.config().using(e,function(){g(l,n)})}})},g=function(n,e){var i=n.indexOf(e);0>i||n.splice(i,1),a.push(e.file),t.each(e.fns,function(t){t&&t(e.file)}),y()},y=function(){var n=!d();if(n){l=[];var e=h;h=[],t.each(e,function(t){t.fn()})}else b()},_=function(n){return t.Promise(function(t){m(n,function(n){t(n)})})};t.extend({using:function(n){return t.route(n).usingPromise()},usingAll:function(n){return t.isNumeric(n)||(n=t.using.Normal),t.Promise(function(t){f(t,n)})}}),t.extend(t.using,{First:0,NormalBefore:45,Normal:50,NormalAfter:55,Last:100});var w=t.noop,$="text/html",x="text/plain",N="application/json",j=function(t){return t&&(t==$?"html":t==N?"json":/^(?:text|application)\/javascript/i.test(t)?"script":/^(?:text|application)\/xml/i.test(t)&&"xml")||"text"},D=function(t,n){return(t+"&"+n).replace(/[&?]{1,2}/,"?")},O=function(n){if(n.data){var e=[];t.isObject(n.data)&&(t.eachProp(n.data,function(n,i){e.push(encodeURIComponent(i)+"="+encodeURIComponent(t.isObject(n)||t.isArray(n)?JSON.stringify(n):n))}),n.data=e.join("&").replace("%20","+")),n.type&&"GET"!=n.type.toUpperCase()||(n.url=D(n.url,n.data))}},T={type:"GET",beforeSend:w,success:w,error:w,complete:w,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:N,xml:"application/xml, text/xml",html:$,text:x},crossDomain:!1,timeout:0},A=function(n){var e=t.extend({},n);for(var i in T)void 0===e[i]&&(e[i]=T[i]);e.crossDomain||(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!=window.location.host);var r=e.dataType,o=/=\?/.test(e.url);if("jsonp"==r||o)return o||(e.url=D(e.url,"callback=?")),C(e);e.url||(e.url=window.location.toString()),O(e);var s,u=e.accepts[r],c={},a=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,l=T.xhr();e.crossDomain||(c["X-Requested-With"]="XMLHttpRequest"),u&&(u+=", */*; q=0.01",c.Accept=u,l.overrideMimeType&&l.overrideMimeType(u)),(e.contentType||e.data&&"GET"!=e.type.toUpperCase())&&(c["Content-Type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),e.headers=t.extend(c,e.headers||{});var h=e.context;l.onreadystatechange=function(){if(4==l.readyState){clearTimeout(s);var t,n=!1;if(l.status>=200&&l.status<300||304==l.status||0==l.status&&"file:"==a){r=r||j(l.getResponseHeader("content-type")),t=l.responseText;try{"script"==r?(0,eval)(t):"xml"==r?t=l.responseXML:"json"==r&&(t=/^\s*$/.test(t)?null:JSON.parse(t))}catch(i){n=i}n?e.error.call(h,l,"parsererror",n):e.success.call(h,t,"success",l)}else e.error.call(h,l,"error",null)}};var f="async"in e?e.async:!0;l.open(e.type,e.url,f);for(name in e.headers)l.setRequestHeader(name,e.headers[name]);return e.beforeSend.call(h,l,e)===!1?(l.abort(),!1):(e.timeout>0&&(s=setTimeout(function(){l.onreadystatechange=w,l.abort(),ajaxError(null,"timeout",l,e)},e.timeout)),l.send(e.data?e.data:null),l)},C=function(n){var e,i="jsonp"+t.makeAutoId(),o=document.createElement("script"),s=function(){r.removeChild(o),i in window&&(window[i]=w)},u={abort:s};return n.error&&(o.onerror=function(){u.abort(),n.error()}),window[i]=function(t){clearTimeout(e),r.removeChild(o),delete window[i],settings.success.call(n.context,t,"success",u)},O(n),o.src=n.url.replace(/=\?/,"="+i),r.appendChild(o),n.timeout>0&&(e=setTimeout(function(){u.abort()},n.timeout)),u};t.ajax=function(n,e){return t.route(n).ajaxPromise(e)};var P=/^\s*<(\w+|!)[^>]*>/;t.tmpl=function(n,i){var r="",o=n;if(t.isString(n)){if(n.indexOf("#")<0)return!n||P.test(n)?e.resolve(n):t.route(n).tmplPromise(i);o=document.getElementById(n.substr(1))}if(o){var s=o.children.length,u=o.firstElementChild;r=1==s&&"script"==u.tagName.toLowerCase()?u.innerHTML:o.innerHTML}return e.resolve(r)};var k="_bg_cache2_";t.cache=function(n,e,i,r){var o=n[k];if(2==arguments.length){if(!o)return;var s=t.inArray(function(t){return t[0]==e},o);return s>-1?o[s][1]:void 0}4>arguments&&(r=20),o||(o=n[k]=[]);var s=t.inArray(function(t){return t[0]==e},o),u=s>-1?o[s]:null,c=(new Date).valueOf();return u?(u[1]=i,u[2]=c):(u=[e,i,c],o.push(u),o.length>=r+5&&(o.sort(function(t,n){return n[2]-t[2]}),n[k]=t.sliceArray(o,0,o.length-5))),i},t.cacheRemove=function(n,e){var i=n[k];if(i){var r=t.inArray(function(){return this[0]==e},i);return r>-1?i.splice(r,1)[0]:void 0}},t.route=function(n,e){return 1==arguments.length?t.routeContext(n).to:void(n&&e&&z.add(n,e))},t.routeContext=function(t){return z.getRouteByUrl(t)},t.routeLink=function(t,n){var e=z.getRuote(t);return e?q(e.context.url,n,1):""},t.routeLinkQuery=function(n,e){n||(n="");var i="";if(n.indexOf("$")>=0||n.indexOf("?")>=0){var r=t.routeContext(n);e=t.extend({},e,r.params.queryParams);var o=n.indexOf("$")>=0?"$":"?";n=n.split(o)[0]}return t.eachProp(e,function(t,n){t=encodeURIComponent(t||""),i=[i,"$",n,":",t].join("")}),[n,i].join("")};var L=/(\W)/g,E=/\?[^?=]+\=.*$/,S=function(n){return!t.isNullEmpty(n)&&/[?*]+/.test(n.replace(E,""))},V=function(t){if(t=t.replace(E,""),!S(t))return null;L.lastIndex=0;var n=t.replace(L,"\\$1").replace(/\\\*\\\*/g,"(.*?)").replace(/(\\([?*]))/g,"([^./]$2?)");return n=["^",n,"$"].join(""),new RegExp(n)},F=/\{([^}]+)\}/gi,I=/\*\*|[?*](?!})/g,R=/\*$/,U=function(n,e){if(!n||!e.url)return null;var i=e.url,r=e._reg;if(!r){var o=i.indexOf("$")>=0?i.split("$")[0]:i;F.lastIndex=0,o=o.replace(F,function(t,n){return R.test(n)?"**":"*"}),r=e._reg=e._reg=V(o)}var s=n.split("$");if(!r.test(s[0]))return null;var u=[];i.replace(I,"{*}").replace(F,function(t,n,e){u.push({key:n,find:t})});var c,a={};s[0].replace(r,function(){var n=arguments;t.each(u,function(t,e){c=t.key,"*"!=c&&(a[c.replace("*","")]=n[e+1])})});var l=a.queryParams={};return s.length>1&&(s=t.sliceArray(s,1),t.each(s,function(t,n){var e=t.split(":"),i=e[0],r=decodeURIComponent(e[1]||"");i&&(a[i]=l[i]=r)})),a},H=function(){var n={app:null,controller:null,component:null},e=this.params;if(e){var i=e.app,r=t.app(i);n.app=r,e.controller&&(n.controller=r.controller(e.controller)),n.controller&&(n.controller=n.controller.fn),e.component&&(n.component=r.component(e.component)),n.component&&(n.component=n.component.fn)}return n},B=function(t,n,e,i){return{name:t,params:i,url:n,to:e,context:H}},M=",component,controller,service,app,queryParams,",q=function(n,e,i){if(F.lastIndex=0,!n||!e)return n;var r,o,s,u="";return t.eachProp(e,function(e,c){r=["{",c,"}"].join(""),o=["{",c,"*}"].join(""),n.indexOf(r)>=0?n=t.replaceAll(n,r,e):n.indexOf(o)>=0?n=t.replaceAll(n,o,e):M.indexOf(","+c+",")<0&&(s=encodeURIComponent(e||""),u=1==i?[u,"$",c,":",s].join(""):[u,"&",c,"=",s].join(""))}),u&&(n=1==i?[n,u].join(""):n.indexOf("?")>=0?[n,u].join(""):[n,u.substr(1)].join("?")),n},z={datas:[],defaultRoute:{url:"**",to:function(t,n){return t}},add:function(n,e){var i=this.getRuote(n);t.isUndefined(e.priority)&&(e.priority=100),i?i.context=e:this.datas.push({name:n,context:e}),this.datas.sort(function(t,n){return t.context.priority-n.context.priority})},getRuote:function(n){var e=null;return t.each(this.datas,function(){return this.name==n?(e=this,!1):void 0}),e},getRouteByUrl:function(n){if(!n)return"";var e=n.split("?");e.length>1&&(n=e[0]);var i=null,r="",o=null;t.each(this.datas,function(){return i=this.context,o=U(n,i),o?(r=this.name,!1):void 0}),o||(i=z.defaultRoute,r="defaultRoute"),(o||i.defaultValue)&&(o=t.extend({},i.defaultValue,o)),e.length>1&&(o||(o={}),e[1].replace(/([^=&]+)\=([^=&]*)/g,function(t,n,e){n in o||(o[n]=e)}));var s=i.to||"";t.isObject(s)?(s=t.extend({},i.to),t.eachProp(s,function(t,e){s[e]=z.makeTo(t,i,n,o)})):(s=z.makeTo(s,i,n,o),s={using:s,ajax:s,tmpl:s});var u=i.promise||{};return t.extend(s,{tmplPromise:u.tmpl||W,ajaxPromise:u.ajax||X,usingPromise:u.using||G}),B(r,n,s,o)},makeTo:function(n,e,i,r){return t.isFunction(n)&&(n=n.call(e,i,r)),q(n,r)}},W=function(n){return t.config().tmpl(this.tmpl,n)},X=function(n){return t.config().ajax(this.ajax,n)},G=function(t){return _(this.using)};t.config({using:u,ajax:function(n,i){return e(function(e,r){A(t.extend({type:"post",dataType:"json"},i,{url:n,success:e,error:r}))})},tmpl:function(n,i){var r=n,o=t.cache(J,r);if(t.isString(o))return e.resolve(o);var s=function(n){return t.isString(n)&&t.cache(J,r,n,200),n};return t.config().ajax(n,t.extend({dataType:"text",type:"get"},i)).then(s)["catch"](s)}});var J={}}(bingo),function(t){var n="bg-route",e="_bg_location_",i=document.documentElement;t.location=function(n){t.isString(n)&&(n='[bg-name="'+n+'"]');var r=null;t.isString(n)?r=document.querySelectorAll(n)[0]:n&&(r=n);var o=!!r;o||(r=i);var u=r[e];return u||(u=(new s).ownerNode(r).isRoute(o).name(r.getAttribute("bg-name")||""),u.bgLinkNode(r),u.bgOnDispose(function(){r[e]=null,this.bgTrigger("onClosed")}),r[e]=u),u},t.location.bgEventDef("onHref onHrefBefore onLoadBefore onLoaded");var r=/#([^#]*)$/,o=function(t){return r.test(t)?RegExp.$1:""};t.extend(t.location,{href:function(e,i){var r=i instanceof s?i:t.location(i);r.isRoute()&&(r.ownerNode().setAttribute(n,e),r.bgTrigger("onChange",[e]))},hash:function(t){return o(t)}});var s=t.location.Class=t.Class(function(){this.Prop({ownerNode:null,isRoute:!1,name:""}),this.Define({queryParams:function(){return this.routeParams().queryParams},routeParams:function(){var n=this.url(),e=t.routeContext(n);return e.params},href:function(n,e){t.location.href(n,t.isNullEmpty(e)?this:e)},reload:function(t){return this.href(this.url(),t)},onLoaded:function(t){return this.on("onLoaded",t)},url:function(){return this.isRoute()?this.ownerNode().getAttribute(n):window.location+""},hash:function(){return t.location.hash(this.url())},toString:function(){return this.url()},views:function(){return t.view(this.ownerNode())._bgpri_.children},close:function(){if(this.isRoute()&&this.bgTrigger("onCloseBefore")!==!1){var t=this.ownerNode();t.parentNode.removeChild(t)}}}),this.Event("onChange onCloseBefore onClosed")});t.service("$location",["node",function(n){return t.location(n)}]),t.command("bg-route",function(){return{priority:1e3,replace:!1,view:!0,compileChild:!1,compile:["$compile","node","$attr","$location",function(n,e,i,r){var o=null,s=function(i){return t.location.bgTrigger("onLoadBefore",[i,r])!==!1?(o&&!o.bgIsDispose&&o.stop(),o=n(i).htmlTo(e),o.compile().then(function(){o=null,r.bgTrigger("onLoaded",[r,i]),t.location.bgTrigger("onLoaded",[r])})):void 0};r.onChange(s);var u=i.content,c=i.view.$parentView(),a=c.bgTestProps(u);if(!a){a=window.bgTestProps(u);var l=a?window.bgDataValue(u):u;return l&&s(l)}var h=c.$layout(u,function(t){if(!i.bgIsDispose){var n=t[0].value;return n&&s(n)}});i.bgDispose(function(){h.unObserve()})}]}})}(bingo),function(t,n){"use strict";var e=document,i=e.documentElement;t.view=function(t){return l(t).view};var r=null;t.rootView=function(){return r};var o=t.Promise,s=function(t,n){return n&&t.push(n),n},u=function(t){return t.length>0?o.all(t):n},c=t.viewClass=t.Class(function(){var e=["$readyAll"];this.Event(e.join("")),this.Private({setParent:function(t){t&&(this.pView=t,t._bgpri_.children.push(this.ow))},removeChild:function(n){this.children=t.removeArrayItem(n,this.children)},controller:function(){if(!this.bgIsDispose){var n=this.ctrls,e=[],i=this.ow;if(n.length>0){var r={node:this.node};t.each(n,function(n){s(e,t.inject(n,this,r,this))},i),this.ctrls=[]}return i.bgToObserve(!0),u(e)}},sendReady:function(e){this.sendReady=t.noop;var i=this.ow,r=this.pView;i.bgSync().done(function(){this.bgEnd("$readyAll")});var s=function(t){var e=this[t],r=this;return function(){var s=e.length>0?o.all(e,function(t){return t.call(i)}):n;return r[t]=null,s}}.bind(this),u=o.resolve().then(s("initPmSrv")).then(s("initPm")).then(s("readyPm")).then(function(){i.$isReady=!0,i.$update(),i.bgSyncDec(),r&&r.bgSyncDec()})["catch"](function(n){t.trace(n)});return e&&e.push(u),u}});var i={$parentView:function(){return this._bgpri_.pView},$setApp:function(t){this._bgpri_.app=t},$getApp:function(){return this._bgpri_.app||t.app(null)},$addController:function(t,n){this._ctrlname=n,t&&this._bgpri_.ctrls.push(t)},$getViewnode:function(t){return t?l(t):this._bgpri_.vNode},$getNode:function(t){var n=this._bgpri_.node;return t?n.querySelectorAll(t):n},$initData:function(t){return this._bgpri_.initPm?this._bgpri_.initPm.push(t):t.call(this),this},$initDataSrv:function(t){return this._bgpri_.initPmSrv?this._bgpri_.initPmSrv.push(t):t.call(this),this},$ready:function(t){return this._bgpri_.readyPm?this._bgpri_.readyPm.push(t):t.call(this),this},$observe:function(n,e,i,r){var o=function(){return this.$updateAsync(),e.apply(this,arguments)}.bind(this);o.orgFn=e.orgFn;var s=t.isFunction(n)?t.observe(n,o):t.observe(this,n,o);return r&&s.isObs||(s.isObs?this._bgpri_.obsList:this._bgpri_.obsListUn).push([s,i,r]),s},$layout:function(n,e,i,r,o){return t.isNumeric(i)||(i=1),this.$observe(n,t.aFrameProxy(e,i),r,o)},$update:function(t){this.$isReady&&(this.bgToObserve(!0),this._bgpri_.obsListUn=this._bgpri_.obsListUn.filter(function(n,e){var i=n[1],r=n[0];n[2];return i&&i.bgIsDispose?(r.unObserve(),
!1):!r.bgIsDispose&&(r.isSucc?r.isObs||(t?r.refresh():r.check()):r.refresh(),r.isObs)?(n[2]||this._bgpri_.obsList.push(n),!1):!0},this))},$updateAsync:function(){this._upastime_&&clearTimeout(this._upastime_),this._upastime_=setTimeout(function(){this.$update()}.bind(this),1)},$html:function(n,e){return arguments.length>0?t.compile(this).html(e).htmlTo(n).compile():jo.innerHTML},$getComp:function(t){return this._bgpri_.comp[t]},$removeComp:function(t){this.bgIsDispose||delete this._bgpri_.comp[t]},$defComp:function(n,r){var o;if(t.eachProp(n,function(n,r){t.inArray(r,e)>=0?this[r](n):"$init"==r?o=n:r in i||(this[r]=n)},this),o&&o.call(this),r){var s=this.$parentView()._bgpri_.comp;s[r]=this}return this}};this.Define(i),this.Init(function(n,e,i){this.Private({ow:this,node:e,children:[],ctrls:[],obsList:[],obsListUn:[],comp:{},initPm:[],initPmSrv:[],readyPm:[],readyAllPm:[]}),this.$isReady=!1,this.bgLinkNode(e),this.bgSyncAdd(),n&&(n.bgSyncAdd(),this._bgpri_.setParent(n)),this._bgpri_.bgOnDispose(function(){t.each(this.obsList,function(t){t[0].bgIsDispose||t[0].unObserve()}),t.each(this.obsListUn,function(t){t[0].bgIsDispose||t[0].unObserve()});var n=this.pView;n&&0==n.bgDisposeStatus&&n._bgpri_.removeChild(this.ow)}),this.bgDispose(this._bgpri_),i&&i.bgOn("ready",function(){this._bgpri_.sendReady(i.ready)}.bind(this))})}),a=function(t,n){t.__bg_vNode=n},l=function(t){return t.__bg_vNode||t.parentNode&&l(t.parentNode)},h=function(t){t.__bg_vNode=n},f=t.viewnodeClass=t.Class(function(){this.Define({_no_observe:!0,_setParent:function(t){t&&(this.parent=t,t.children.push(this))},_removeChild:function(n){this.children=t.removeArrayItem(n,this.children)},$getAttr:function(n){n=n.toLowerCase();var e;return t.each(this.attrList,function(){return this.name==n?(e=this,!1):void 0}),e},$html:function(t){return this.view.$html.apply(this.view,[this.node,t])},_removeText:function(n){this._textList=t.removeArrayItem(n,this._textList)}}),this.Init(function(n,e,i,r,o){this.bgLinkNode(e),a(e,this),t.extend(this,{node:e,view:n,attrList:[],_textList:[],children:[],withData:r||i&&i.withData}),i||(n._bgpri_.vNode=this),this._setParent(i),this.bgOnDispose(function(){h(this.node);var n=this.parent;n&&0==n.bgDisposeStatus&&n._removeChild(this),t.each(this.attrList,function(t){t.bgIsDispose||t.bgDispose()}),t.each(this._textList,function(t){t.bgIsDispose||t.bgDispose()})}),o&&(o.bgOn("ctrl",function(){t.each(this.attrList,function(t){var n=t.command.controller;n&&s(o.ctrl,t._inject(n))})}.bind(this)),o.bgOn("compile",function(){this.attrList.sort(function(t,n){return t.priority-n.priority}),t.each(this.attrList,function(t){var n=t.command.compile;n&&s(o.compile,t._inject(n)),s(o.compile,t._getPms())})}.bind(this)),o.bgOn("link",function(){t.each(this.attrList,function(t){var n=t.command.link;n&&s(o.link,t._inject(n)),s(o.link,t._getPms())})}.bind(this)),o.bgOn("init",function(){t.each(this.attrList,function(t){t.$publish()})}.bind(this)))})}),p={_cacheName:"__contextFun__",bindContext:function(n,e,i,r,o,s){var u=[e,i].join("_"),c=n[p._cacheName]||(n[p._cacheName]={});return c[u]?c[u]:(i&&(e=["try { return ",e,";} catch (e) {bingo.observe.error(e);}"].join("")),c[u]=new Function("$view","node","$withData","bingo",["with ($view) {",s?"with ($withData) {":"","return function (event) {",e,"}.bind(node);",s?"}":"","}"].join(""))(r,o||r.viewnode.node,s,t))}};t.bindContext=function(t,n,e,i,r,o,s){var u=p.bindContext(t,n,s,e,i,r);return u(o)};var d=t.attrClass=t.Class(function(){this.Define({_no_observe:!0,_inject:function(n){return t.inject(n,this.view,{node:this.node,$viewnode:this.viewnode,$attr:this,$withData:this.withData},this.command)},$eval:function(t){var n=p.bindContext(this,this.content,!1,this.view,this.node,this.withData);return n(t)},$results:function(t){var n=p.bindContext(this,this.content,!0,this.view,this.node,this.withData);return n(t)},_makeValueObj:function(){if(this._makeValueParams)return this._makeValueParams;var t=this.content,n=this.withData,e=this.view,i=!!n&&n.bgTestProps(t),r=i?!1:e.bgTestProps(t),o=r?!1:window.bgTestProps(t),s=i?n:i?window:e;return this._makeValueParams=[s,i||r||o]},$hasProps:function(){return this._makeValueObj()[0].bgTestProps(this.content)},$value:function(t){var n=this.content,e=this._makeValueObj()[0];return 0==arguments.length?e.bgDataValue(n):(this.view.$updateAsync(),void e.bgDataValue(n,t))},$publish:function(){},$observe:function(t,n){1==arguments.length&&(n=t,t=function(){return this.$results()}.bind(this));var e=this.view.$observe(t,n,this,!0);return this._obsList.push(e),e},$observeValue:function(t){return this.$hasProps()||this.$value(n),this.$observe(function(){return this.$value()}.bind(this),t)},$layout:function(t,n){1==arguments.length&&(n=t,t=function(){return this.$results()}.bind(this));var e=this.view.$layout(t,n,0,this,!0);return this._obsList.push(e),s(this._pms,e.publish(!0)),e},$layoutValue:function(t){return this.$hasProps()||this.$value(n),this.$layout(function(){return this.$value()}.bind(this),t)},_getPms:function(){var t=this._pms;return this._pms=[],u(t)}}),this.Init(function(n,e,i,r,o,s,u){t.extend(this,{node:e.node,view:n,viewnode:e,type:i,name:r.toLowerCase(),command:s,priority:s.priority||50,withData:e.withData,content:o,_obsList:[],_pms:[]}),e.attrList.push(this),this.bgOnDispose(function(){t.each(this._obsList,function(t){t.bgIsDispose||t.unObserve()})})})}),v={_regex:/\{\{(.+?)\}\}/gi,hasTag:function(t){return this._regex.lastIndex=0,this._regex.test(t)},isRmTxNode:function(t,n){return t==n||t.parentNode==n?!1:t.parentNode?this.isRmTxNode(t.parentNode,n):!0},createTextNode:function(n,e,i,r,o,s,u,c){var a=i.nodeType,l=e.node;s||(s=t.extend({},e.withData,s)),r&&(r=r.toLowerCase()),i.nodeValue="";var h=!1,f={_no_observe:!0,type:a,name:r,content:o,_init:function(){if(!h){h=!0;var e=o,r=[],u=function(t){i.nodeValue=t},c=function(){var n=e;t.each(r,function(t){n=n.replace(t.text,t.value)}),u(n)},a=e.replace(v._regex,function(e,o,u,a){var l,h=p.bindContext(f,o,!0,n,i,s),d=n.$layout(function(){return h()},function(n){f.bgIsDispose||f._checkRemove()||(l.value=t.toStr(n.value),c())},0),v=d.value;return r.push(l={text:e,value:v,context:h,obs:d}),v});u(a),f.bgOnDispose(function(){t.each(r,function(t){t.obs.bgIsDispose||t.obs.unObserve(),t.bgDispose()}),r=null})}},_checkRemove:function(){var t=h&&v.isRmTxNode(3==a?i:u,l);return t&&this.bgDispose(),t}};e._textList.push(f),3==a&&f.bgOnDispose(function(){0==e.bgDisposeStatus&&e._removeText(f)}),c.bgOn("init",function(){f._init()})}},m=window.requestAnimationFrame,b=window.cancelAnimationFrame,g=function(t,n,e){e.id=m(function(){0==n?t.call(e,e):g(t,n-1,e)})};if(!m){var y=["webkit","moz","ms","o"];t.each(y,function(t){return m=window[t+"RequestAnimationFrame"],m?(b=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"],!1):void 0}),m||(m=function(t){return window.setTimeout(t,10)},b=function(t){window.clearTimeout(t)})}t.aFrame=function(n,e){(!t.isNumeric(e)||0>e)&&(e=0);var i={stop:function(){b(this.id)},next:function(n){return t.aFrame(n,e)},frame:t.aFrame};return g(n,e,i),i},t.aFramePromise=function(n){return o(function(e){t.aFrame(e,n)})},t.aFrameProxy=function(n,e){var i=!1,r=function(){if(!i){i=!0;var r=arguments;t.aFrame(function(){i=!1,n.apply(this,r)}.bind(this),e)}};return r.orgFn=n,r};var _=function(n){t.each(n,function(t){t.parentNode&&t.parentNode.removeChild(t)})},w={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],div:[1,"<div>","</div>"]},$=function(t,n,i){var r=n?n.tagName.toLowerCase():"",o=w[r]||w.div,s=o[0];t=o[1]+t+o[2];var u=e.createElement("div");for(u.innerHTML=t;s--;)u=u.lastChild;return u.childNodes},x=function(n,e,i){t.each(n,function(t){"appendTo"==i?e.appendChild(t):e.parentNode[i](t,e)})};t.parseHTML=$;var N={attrName:"_bg_cpl_160220",isCmpNode:function(t){return"1"==t[this.attrName]},setCmpNode:function(t){t[this.attrName]="1"},traverseNode:function(t){var n=t.node;if(1===n.nodeType)return this.isCmpNode(n)?this.traverseNodes(n.childNodes,t):(this.setCmpNode(n),this.analyzeNode(n,t));if(3===n.nodeType&&!this.isCmpNode(n)){this.setCmpNode(n);var e=n.nodeValue;v.hasTag(e)&&v.createTextNode(t.view,t.pViewnode,n,n.nodeName,e,t.withData,null,t.build)}n=t=null},traverseNodes:function(n,e){var i=[],r=[],o=e.withDataList,c=e.withData,a=[],l=t.extend({},e),h=-1;return t.each(n,function(n){this.isComment(n)?r.push(n):(h=o?this.getWithdataIndex(n):-1,h>=0&&(c=e.withData=o[h]),1!==n.nodeType&&3!==n.nodeType||(e.node=n,e.withData=c,s(a,this.traverseNode(e)),e=t.extend({},l)))},this),(r.length>0||i.length>0)&&_(r.concat(i)),u(a)},commentTest:/^\s*#/,isComment:function(t){return 8==t.nodeType&&this.commentTest.test(t.nodeValue)},injWithTmpl:function(n,e){return n=t.sliceArray(n),t.each(n,function(t){t._bg_withIndex_=e}),n},getWithdataIndex:function(t){return"_bg_withIndex_"in t?t._bg_withIndex_:-1},newView:function(t,n){t.view=new c(t.view,n,t.build),t.ctrl&&(t.view.$addController(t.ctrl),t.ctrl=null),t.withData=t.pViewnode=null},buildVNode:function(n,e,i,r){r&&this.newView(n,e);var o=n.view,s=n.pViewnode=new f(o,e,n.pViewnode,n.withData,n.build);return t.each(i,function(){new d(o,s,this.type,this.aName,this.aVal,this.command,n.build),this.command.tmpl=null}),s},_makeCmd:function(n,e,i,r){var o=t.extend({},n);return o.compilePre&&s(r.cmpPres,t.inject(o.compilePre,e,{node:i},o)),o},addAttrs:function(t,n,e,i,r){t.replace=n.replace,t.include=n.include,t.tmpl=n.tmpl,t.isNewView||(t.isNewView=n.view),!t.compileChild||(t.compileChild=n.compileChild);var o={aName:e,aVal:i,type:r,command:n};t.replace||t.include?t.attrs=[o]:t.attrs.push(o)},analyzeAttr:function(n,e,i,r,o){var s,u,c,a=i.attributes,l=a.length;t.each(a,function(t){if(!N.isCmpNode(t))if(N.setCmpNode(t),u=t.nodeName,s=t.nodeValue,r&&"type"==u&&(u=s),c=e.command(u)){if(c=N._makeCmd(c.fn,o.view,i,n),c.compilePre&&(s=t.nodeValue),N.addAttrs(n,c,u,s,"attr"),n.replace||n.include)return!1}else s&&v.hasTag(s)&&n.texts.push({node:t,aName:u,aVal:s})}),a.length!=l&&N.analyzeAttr(n,e,i,r,o)},analyzeView:function(n,e,i){var r,o=n.attrs,c=n.compileChild,a=[];if(o.length>0){var l=n.tmpl||o[0].command.tmpl,h=n.replace,f=n.include,p=n.isNewView,d=t.isNullEmpty(l);if(h||f||!d)if(h||f){var m=e;d?_([m]):a.push(t.tmpl(l).then(function(n){var e=m;if(f){var s="{{bg-include}}";n.indexOf(s)>=0&&(n=t.replaceAll(n,s,e.outerHTML))}n=t.trim(n)||"<div></div>";var u=e.parentNode,a=$(n,u);return a.length>1?(e=$("<div></div>",u)[0],x(a,e,"appendTo")):e=a[0],x([e],m,"insertBefore"),_([m]),r=N.buildVNode(i,e,o,p),c&&N.traverseNodes(e.childNodes,i)}))}else a.push(t.tmpl(l).then(function(t){return e.innerHTML=t,r=N.buildVNode(i,e,o,p),c&&N.traverseNodes(e.childNodes,i)}));else r=N.buildVNode(i,e,o,p),c&&s(a,N.traverseNodes(e.childNodes,i))}return h||f||t.each(n.texts,function(){v.createTextNode(i.view,r||i.pViewnode,this.node,this.aName,this.aVal,i.withData,e,i.build)}),l=null,c&&s(a,N.traverseNodes(e.childNodes,i)),u(a)},analyzeNode:function(n,e){var i=n.tagName,r=null;if(!t.isNullEmpty(i)){i=i.toLowerCase();var c="script"==i,a=e.view.$getApp();r=a.command(i);var l={attrs:[],texts:[],replace:!1,include:!1,compileChild:!c,tmpl:null,cmpPres:[],isNewView:!1};r?(r=N._makeCmd(r.fn,e.view,n,l),N.addAttrs(l,r,i,"","node")):n.attributes.length>0&&N.analyzeAttr(l,a,n,c,e);var h=[],f=l.cmpPres;return 0==f.length?s(h,N.analyzeView(l,n,e)):h.push(o.all(f).then(function(){return N.analyzeView(l,n,e)})),u(h)}}},j=t.Class(function(){this.Prop({view:null,url:null,tmpl:null,nodes:null,html:null,controller:null,clearChild:!1,withData:null,withDataList:null}),this.Define({node:null,type:0,prop:function(t,n){return 0==t.length?this.node:(this.type=n,this.node=t[0],this)},appendTo:function(t){return this.prop(arguments,0)},htmlTo:function(t){return this.prop(arguments,1)},insertBefore:function(t){return this.prop(arguments,2)},_rendArgs:null,render:function(n,e,i,r){return this._rendArgs=t.sliceArray(arguments),this},_render:function(n,e,i,r){this._rendArgs=null,e=t.extend([],e),r=r||{};var o=[],s=("$index"in r?r.$index:-1,e.length),u=[];return t.each(e,function(e,c){var a=t.extend({},r);a.itemName=i,a[[i,"index"].join("_")]=a.$index=c,a[[i,"count"].join("_")]=a.$count=s,a[[i,"first"].join("_")]=a.$first=0==c,a[[i,"last"].join("_")]=a.$last=c==s-1;var l=c%2==0;a[[i,"odd"].join("_")]=a.$odd=l,a[[i,"even"].join("_")]=a.$even=!l,a[i]=e,o.push(a),u=u.concat(N.injWithTmpl($(n,this.node),c))}),this.nodes(u).withDataList(o),this},stop:function(){this._stop=!0},_isEnd:function(){return this.bgIsDispose||this._stop||this.view()&&this.view().bgIsDispose},_compile:function(){var n=t.isElement(this.nodes())?[this.nodes()]:t.sliceArray(this.nodes()),e=this.node,i=e||n[0].parentNode;if(!i)return o.resolve();var r={ctrl:[],compile:[],link:[],init:[],ready:[]},s=this.view()||t.view(i),u=l(i);u&&u.view!=s&&(u=null);var c=this.withDataList(),a=this,h=function(t){return function(){return r.bgTrigger(t),r[t].length>0&&o.all(r[t])}};return o.all([N.traverseNodes(n,{node:null,pViewnode:u,view:s,ctrl:this.controller(),withData:this.withData(),withDataList:c,build:r})]).then(h("ctrl")).then(function(){return s._bgpri_.controller()}).then(h("compile")).then(function(){return t.aFramePromise().then(function(){e&&(1==a.type&&(e.innerHTML=""),x(n,e,2==a.type?"insertBefore":"appendTo"))}).then(h("link")).then(h("init")).then(h("ready"))})["finally"](function(n){n instanceof Error&&t.trace(n),r.bgOff(),r.bgDispose(),a.bgDispose()})},compile:function(){if(!this._isEnd()){if(this._rendArgs)return this._render.apply(this,this._rendArgs)._compile();if(this.nodes())return this._compile();if(t.isString(this.html()))return this.nodes($(this.html(),this.node,!0))._compile();if(this.url()||this.tmpl()){var n=this,e=this.view()||t.view(this.node);return this.view(e),t.tmpl(this.url()||this.tmpl()).then(function(t){return t&&n.html(t).compile()})}}return o.resolve()}})});t.compile=function(t){return(new j).view(t)},t.bgEventDef("ready"),function(){N.setCmpNode(i),r=new c(null,i),new f(r,i),r.$ready(function(){t.bgEnd("ready")});var n="DOMContentLoaded",o=function(){e.removeEventListener(n,o,!1),window.removeEventListener("load",o,!1),t.usingAll().then(function(){t.compile(r).nodes(i).compile()["finally"](function(){return r._bgpri_.sendReady()})})};e.addEventListener(n,o,!1),window.addEventListener("load",o,!1)}()}(bingo),function(t){"use strict";t.service("$parentView",["$view",function(t){return t.$parentView()}]),t.service("$inject",["$view","$attr",function(n,e){return function(i,r){return t.inject(i,n,{node:e&&e.node,$viewnode:e&&e.viewnode,$attr:e,$withData:e?t.extend({},e.withData,r):r},e)}}]),t.service("$compile",["$view",function(n){return function(e){return t.compile(n).tmpl(e)}}]),t.service("$ajax",["$view",function(n){return function(e){return t.ajax(e,n)}}]),t.each(["$comp","$component"],function(n){t.service(n,["$view",function(n){var e=function(t){return n.$getComp(t)};return e.create=function(e,i,r){return t.aFramePromise().then(function(){var o='<bg:component bg-src="'+i+'" bg-name="'+r+'"></bg:component>',s=t.parseHTML(o,e)[0];return e.appendChild(s),t.compile(n).nodes([s]).compile()})},e}])}),t.each(["$bindContext","$evalContext"],function(n){var e="$bindContext"==n;t.service(n,["$view","$viewnode","$withData",function(n,i,r){return function(o,s,u,c){return s||(s=i.node),u=t.extend({},r,u),t.bindContext(i,o,n,s,u,c,e)}}])}),t.service("$observe",["$view",function(t){return function(n,e,i){return t.$observe(n,e,i)}}]),t.service("$layout",["$view",function(t){return function(n,e,i){return t.$layout(n,e,i)}}]),t.service("$tmpl",["$view","node",function(n,e){return function(e,i){return t.tmpl(e,i,n)}}]);t.service("$cache",function(){return function(n,e,i){var r=[_cacheM].concat(t.sliceArray(arguments));return t.cache.apply(t,r)}});var n={};t.service("$param",function(){return function(e,i){return 1==arguments.length?t.cache(n,e):t.cache(n,e,i,10)}})}(bingo),function(t){"use strict";var n=(t.Promise,function(t,n,e){return arguments.length<3?t.getAttribute(n):void t.setAttribute(n,e)}),e=function(t,n,e){return arguments.length<3?t[n]:void(t[n]=e)},i=document.addEventListener,r=document.removeEventListener,o=/^-ms-/,s=/-([\da-z])/gi,u=function(t,n){return(n+"").toUpperCase()},c=function(t){return t.replace(o,"ms-").replace(s,u)},a=["width","height","fontSize","top","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","margin","marginLeft","marginRight","marginTop","marginBottom"],l=function(t,n,e){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i=c(n),r=t.style;return arguments.length<3?r[i]:void(r[i]=a.indexOf(n)>=0?parseFloat(e)+"px":e)}},h=function(t){var n="_bgshow_";return n in t?t[n]:t[n]=l(t,"display")},f=function(t){var n=h(t);l(t,"display","none"==n?"block":n)},p=function(t){h(t),l(t,"display","none")},d=function(t,n){return arguments.length<2?t.value:void(t.value=n)};t.each(["bg-controller","bg-controller-add"],function(n){var e="bg-controller-add"==n;t.command(n,function(){return{priority:e?5:1,tmpl:"",replace:!1,include:!1,view:!e,compileChild:e,compilePre:null,compile:null,link:null,controller:["$view","$compile","node","$attr",function(n,i,r,o){var s=o.content,u=null,c=n.$parentView();t.isNullEmpty(s)||(c.bgTestProps(s)?u=c.bgDataValue(s):window.bgTestProps(s)&&(u=window.bgDataValue(s)));var a=function(){return!e&&t.usingAll().then(function(){return i().nodes(r.childNodes).compile()})};if(t.isNullEmpty(s)||t.isFunction(u)||t.isArray(u))return u&&n.$addController(u,s),a();var l=s,h=t.routeContext(l),f=h.context();return f.controller?(n.$setApp(f.app),n.$addController(f.controller,s),a()):t.using(l).then(function(){var t=h.context();return t.controller?(n.$setApp(t.app),n.$addController(t.controller,s),a()):void 0})}]}})}),t.each(["bg-init","bg-load"],function(n){var e="bg-load"==n?999999:3;t.command(n,function(){var t={priority:e};return t["bg-load"==n?"link":"compile"]=["$attr",function(t){t.$eval()}],t})}),t.command("bg-not-compile",function(){return{compileChild:!1}}),t.command("bg-node",function(){return{compile:["$attr",function(t){t.$value(t.node)}]}}),t.command("bg-text",function(){return{compile:["$attr","node",function(t,n){t.$layout(function(t){n.textContent=t.value})}]}}),t.command("bg-html",function(){return{compile:["$attr","$viewnode",function(t,n){t.$layout(function(t){return n.$html(t.value)})}]}}),t.command("bg-include",function(){return{compile:["$attr","$viewnode","$tmpl",function(t,n,e){var i=function(t){return e(t).then(function(t){n.$html(t)})};return t.$hasProps()?void t.$layoutValue(function(t){return n.$html(t.value)}):i(t.content)}]}}),t.command("bg-if",function(){return{compileChild:!1,compile:["$attr","$viewnode","node","$tmpl",function(t,n,e,i){return i(e).then(function(i){var r=function(t){return t?n.$html(i).then(function(){f(e)}):void p(e)};t.$layout(function(t){return r(t.value)})})}]}}),t.each("attr,prop,src,checked,unchecked,disabled,enabled,readonly,class".split(","),function(o){t.command("bg-"+o,function(){return{compile:["$view","$attr","node",function(s,u,c){var a=function(i){switch(o){case"attr":t.eachProp(i,function(t,e){n(c,e,t)});break;case"prop":t.eachProp(i,function(t,n){e(c,n,t)});break;case"enabled":e(c,"disabled",!i);break;case"unchecked":e(c,"checked",!i);break;case"disabled":case"readonly":case"checked":e(c,o,i);break;case"class":var r=i;t.isObject(i)&&(r=[],t.eachProp(i,function(t,n){t&&r.push(n)}),r=r.join(" ")),e(c,o,r);break;default:n(c,o,i)}};if(u.$layout(function(t){a(t.value)}),"checked"==o||"unchecked"==o){var l=function(){var t=e(c,"checked");u.$value("checked"==o?t:!t)};i.call(c,"click",l),u.bgOnDispose(function(){r.call(c,"click",l)})}}]}})}),t.each("event,click,blur,change,dblclick,focus,focusin,focusout,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,resize,scroll,select,submit,contextmenu".split(","),function(n){t.command("bg-"+n,function(){return["$view","node","$attr",function(e,o,s){var u=[],c=function(t,n){var r=function(){return e.$updateAsync(),n.apply(this,arguments)};u.push([t,r]),i.call(o,t,r)};if(s.bgOnDispose(function(){t.each(u,function(t){r.call(o,t[0],t[1])})}),"event"!=n){var a=/^\s*\[(.|\n)*\]\s*$/g.test(s.content)?s.$results():s.$value();t.isFunction(a)||t.isArray(a)||(a=function(t){return s.$eval(t)}),c(n,a)}else{var l=s.$results();t.isObject(l)&&t.eachProp(l,function(t,n){c(n,t)})}}]})}),t.each("style,show,hide,visible".split(","),function(n){t.command("bg-"+n,function(){return{compile:["$attr","node",function(e,i){var r=function(e){switch(n){case"style":t.eachProp(e,function(t,n){l(i,n,t)});break;case"hide":e=!e;case"show":e?f(i):p(i);break;case"visible":e=e?"visible":"hidden",l(i,"visibility",e);break;default:l(i,n,e)}};e.$layout(function(t){r(t.value)})}]}})}),t.command("bg-model",function(){return{compile:["$view","node","$attr",function(o,s,u){var c,a,l=n(s,"type"),h="radio"==l,f="checkbox"==l,p=f?d(s):null,v="select"==s.tagName.toLowerCase(),m=function(){return f?e(s,"checked")?p:"":d(s)},b=function(n){n=v&&t.isArray(n)?n:t.toStr(n),f?e(s,"checked",d(s)==n):h?e(s,"checked",d(s)==n):d(s,n)},g=function(){var t=m();c!=t&&(c=t,u.$value(t))};h?a="click":(a="change",i.call(s,"change",g)),a&&(i.call(s,a,g),u.bgOnDispose(function(){r.call(s,a,g)})),u.$layoutValue(function(t){var n=t.value;b(n)})}]}}),t.command("bg-for",function(){return{priority:10,compileChild:!1,compile:["$view","$compile","node","$attr","$tmpl",function(n,e,i,r,o){var s=m(r);if(s){var u=s.itemName,c=s.tmpl;c||o(i).then(function(t){c=t});var a=function(t,n){return e().render(t,n,u,r.withData).htmlTo(i).compile().then(function(){var t=r.viewnode.$getAttr("bg-model");t&&t.$publish()})};r.$layout(function(n){var e=n.value,i=t.isArray(e),r=i?e:t.sliceArray(e);return!i&&0==r.length&&(r=e?[e]:[]),o(c).then(function(t){return a(t,r)})})}}]}});var v=/[ ]*([^ ]+)[ ]+in[ ]+(?:(.+)[ ]+tmpl[ ]*=[ ]*(.+)|(.+))/,m=function(n){var e=n.content;t.isNullEmpty(e)&&(e="item in {}"),v.test(e)||(e=["item in ",e].join(""));var i="",r="",o="";return e.replace(v,function(){i=arguments[1],r=arguments[2],o=t.trim(arguments[3]),t.isNullEmpty(r)&&(r=arguments[4])}),n.content=r,{itemName:i,dataName:r,tmpl:o}};t.each(["bg-component","bg:component"],function(e){var i="bg-component"==e;t.command(e,function(){return{priority:3,view:!0,compileChild:!1,replace:!0,include:!1,compilePre:["$view","node","$inject",function(e,r,o){var s,u=n(r,i?"bg-component":"bg-src"),c=n(r,"bg-name");t.isNullEmpty(u)||(e.bgTestProps(u)?s=e.bgDataValue(u):window.bgTestProps(u)&&(s=window.bgDataValue(u)));var a=function(n){n=t.isFunction(n)?o(n):n,this.tmpl=n.$tmpl||r,this._bgcompdef_={def:n,name:c}}.bind(this);if(s)return a(s);var l=u,h=t.routeContext(l),f=h.context();return f.component?a(f.component):t.using(l).then(function(){return h=t.routeContext(l),f=h.context(),f.component?a(f.component):void 0})}],controller:["$view","$compile","node","$attr",function(t,n,e){var i=t.$parentView(),r=this._bgcompdef_,o=r.def,s=r.name;if(t.bgOnDispose(function(){i.$removeComp(s)}),o){var u=t.$defComp(o,s);return u.bgToObserve(),n().nodes([e]).compile()}}]}})})}(bingo);